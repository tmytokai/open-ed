<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
<link rel="stylesheet" href="../../../common.css">
<script src="../../../common.js"></script>
<script src="../../../mathjax.js"></script>
<title>演習</title>
</head>
<body>

<nav class="brcr">
<ol>
<li><a href="../">アクティビティ: ディジタル線形フィルタ</a></li>
<li>学習項目: [4] ARモデル</li>
<li><script>GetTitle()</script></li>
</ol>
</nav>

<h2><script>GetTitle()</script></h2>

<br>
<h2><a href="./page01.html">1. 線形予測モデル</a></h2>
<h2><a href="./page02.html">2. 線形予測誤差</a></h2>
<h2><a href="./page03.html">3. AR モデル</a></h2>
<h2><a href="./page04.html">4. レビンソン・ダービン・アルゴリズム</a></h2>

<br>
<p>
<input type="checkbox"><b>演習4-1 (個人):</b> 4次ARモデル( a[1] = 0.1、a[2] = 0.3、a[3] = -0.2、a[4] = 0.15 )
</p>

\[
x[i] = -0.1 \cdot x[i-1] -0.3 \cdot x[i-2] - (-0.2) \cdot x[i-3] - 0.15 \cdot x[i-4] + e[i]
\ , \ (i=0,1,\cdots, \textrm{N}-1)
\]

<p>
から出力されたディジタル信号 x[i] に対してレビンソン・ダービン・アルゴリズムを適用し、各 LPC 係数を推定してみましょう。
<br>
信号の長さは N = 50000 とします。
<br>
また x[-1] = x[-2] = x[-3] = x[-4] = 0 とします。
<br>
また $e[i]$ は平均 0、分散 1 の時刻毎に独立な正規乱数とします。
<br>

</p>
<div class="olradio"> 
<p>
<span class="olradio"><input type="radio" name="p1"></span> フォルダ「DF_4_1」を新規作成し、その中に移動します 
<br>
<span class="olradio"><input type="radio" name="p1"></span> フォルダ「DF_4_1」の中に main.cpp を作成します 
<br>
<span class="olradio"><input type="radio" name="p1"></span> main.cpp を開き、ファイルの中身を<a href="./src/DF_4_1.txt">テンプレートソース</a>の内容に置き換えて下さい。 
<br>
<span class="olradio"><input type="radio" name="p1"></span> テンプレートファイルの記述に従って ? の部分を上から穴埋めしてプログラムを完成させて下さい。
<br>
<span class="olradio"><input type="radio" name="p1"></span> コンパイルして実行すると L 個の LPC 係数の推定値(及び参考までに PARCOR 係数)が画面上に表示されます。
<br>
<span class="olradio"><input type="radio" name="p1"></span> さらに CSV ファイル(DF_4_1_x.csv)が出力されます。この CSV ファイルは x[i] の先頭 100 個分のデータです。
<br>
<span class="olradio"><input type="radio" name="p1"></span> CSV ファイルを表計算ソフトで開き、一行目に空行を挿入し、最初の列の先頭に「i」、次の列の先頭に「x[i]」と入力します。
<br>
<span class="olradio"><input type="radio" name="p1"></span> グラフを挿入します。グラフの種類は散布図、点あり、線あり、平滑化「なし」とします。
<br>
<span class="olradio"><input type="radio" name="p1"></span> 「名前を付けて保存」でシートを表計算形式で保存します。ファイル名は「DF_4_1_x」として下さい(拡張子は使用する表計算ソフトによる)。
<br>
<span class="olradio"><input type="radio" name="p1"></span> チーム内で答え合わせをし、真の LPR 係数の値と推定値が近いことを確認して下さい。
<br>
<span class="olradio"><input type="radio" name="p1"></span> 指定場所に「LPC係数の推定値」「x[i] のグラフ」を貼り付けて下さい。  
</p>
</div>

<br>
<p>
<input type="checkbox"><b>演習4-2 (個人):</b> 真の LPC 係数の代わりに演習 4-1 で求めた LPC 係数の推定値を使った時の線形予測値 $\hat{x}[i]$ を求めてみましょう
</p>
<div class="olradio"> 
<p>
<span class="olradio"><input type="radio" name="p2"></span> フォルダ「DF_4_2」を新規作成し、その中に移動します 
<br>
<span class="olradio"><input type="radio" name="p2"></span> フォルダ「DF_4_2」の中に main.cpp を作成します 
<br>
<span class="olradio"><input type="radio" name="p2"></span> main.cpp を開き、ファイルの中身を<a href="./src/DF_4_2.txt">テンプレートソース</a>の内容に置き換えて下さい。 
<br>
<span class="olradio"><input type="radio" name="p2"></span> テンプレートファイルの記述に従って ? の部分を上から穴埋めしてプログラムを完成させて下さい。
<br>
<span class="olradio"><input type="radio" name="p2"></span> コンパイルして実行すると L 個の LPC 係数の推定値が画面上に表示されます。
<br>
<span class="olradio"><input type="radio" name="p2"></span> さらに CSV ファイル(DF_4_2_hatx.csv)が出力されます。この CSV ファイルは線形予測値 $\hat{x}[i]$ の先頭 100 個分のデータです。 
<br>
<span class="olradio"><input type="radio" name="p2"></span> CSV ファイルを表計算ソフトで開き、一行目に空行を挿入し、最初の列の先頭に「i」、次の列の先頭に「hatx[i]」 と入力します。
<br>
<span class="olradio"><input type="radio" name="p2"></span> グラフを挿入します。グラフの種類は散布図、点あり、線あり、平滑化「なし」とします。
<br>
<span class="olradio"><input type="radio" name="p2"></span> 「名前を付けて保存」でシートを表計算形式で保存します。ファイル名は「DF_4_2_hatx」として下さい(拡張子は使用する表計算ソフトによる)。
<br>
<span class="olradio"><input type="radio" name="p2"></span> チーム内で答え合わせをし、$\hat{x}[i]$ のグラフと $\hat{x}[i]$ のグラフを見比べてみましょう。
<br>
<span class="olradio"><input type="radio" name="p2"></span> 指定場所に「hatx[i] のグラフ」を貼り付けて下さい。  
</p>
</div>

<br>
<p>
<input type="checkbox"><b>演習4-3 (個人):</b> 真の LPC 係数の代わりに演習 4-1 で求めた LPC 係数の推定値を使った時の線形予測誤差の推定値 $\hat{e}[i]$ を求めてみましょう
</p>
<div class="olradio"> 
<p>
<span class="olradio"><input type="radio" name="p3"></span> フォルダ「DF_4_3」を新規作成し、その中に移動します 
<br>
<span class="olradio"><input type="radio" name="p3"></span> フォルダ「DF_4_3」の中に main.cpp を作成します 
<br>
<span class="olradio"><input type="radio" name="p3"></span> main.cpp を開き、ファイルの中身を<a href="./src/DF_4_3.txt">テンプレートソース</a>の内容に置き換えて下さい。 
<br>
<span class="olradio"><input type="radio" name="p3"></span> テンプレートファイルの記述に従って ? の部分を上から穴埋めしてプログラムを完成させて下さい。
<br>
<span class="olradio"><input type="radio" name="p3"></span> コンパイルして実行すると L 個の LPC 係数の推定値が画面上に表示されます。
<br>
<span class="olradio"><input type="radio" name="p3"></span> さらに CSV ファイル(DF_4_3_hate.csv)が出力されます。 CSV ファイルは $\hat{e}[i]$ および $e[i]$ の先頭 100 個分のデータです。
<br>
<span class="olradio"><input type="radio" name="p3"></span> CSV ファイルを表計算ソフトで開き、一行目に空行を挿入し、最初の列の先頭に「i」 、次の列の先頭に「hate[i]」、その次の列の先頭に「e[i]」 と入力します。
<br>
<span class="olradio"><input type="radio" name="p3"></span> グラフを挿入します。グラフの種類は散布図、点あり、線あり、平滑化「なし」とします。
<br>
<span class="olradio"><input type="radio" name="p3"></span> 「名前を付けて保存」でシートを表計算形式で保存します。ファイル名は「DF_4_3_hate」として下さい(拡張子は使用する表計算ソフトによる)。
<br>
<span class="olradio"><input type="radio" name="p3"></span> チーム内で答え合わせをし、$\hat{e}[i]$ と $e[i]$ のグラフを見比べて下さい。
<br>
<span class="olradio"><input type="radio" name="p3"></span> 各自が指定場所に「$\hat{e}[i]$ と $e[i]$ のグラフ」を貼り付けて下さい。  
</p>
</div>


<br>
<p>
<input type="checkbox"><b>演習4-4 (個人):</b> 自分の声の LPC 係数の推定値を求め、さらにその推定値を使った時の線形予測値 $\hat{x}[i]$ と線形予測誤差 $err[i]$ を求めてみましょう。なお L = 100 とします。 
</p>
<div class="olradio">
<p>
<span class="olradio"><input type="radio" name="p4"></span> マイクを PC の端子に繋ぎます。
<br>
<span class="olradio"><input type="radio" name="p4"></span> マイクの設定を開いて音量調整をします。
<br>
<span class="olradio"><input type="radio" name="p4"></span> <a href="../../../lib/sound/recorder.html" onclick="window.open( '../../../lib/sound/recorder.html', 'recorder','width=300,height=200 ');return false;" >レコーダー</a>を開きます。
<br>
<span class="olradio"><input type="radio" name="p4"></span>「アー」の声を「2 秒以上」録音し、ダウンロードフォルダに音声ファイル( out.wav ) をダウンロードします。
<br>
<span class="olradio"><input type="radio" name="p4"></span> out.wav を試しに再生し、もし音が小さい場合は録音し直します。
<br>
<span class="olradio"><input type="radio" name="p4"></span> out.wav を演習フォルダに移動して「 a.wav 」に名前を変更します。
<br>
<span class="olradio"><input type="radio" name="p4"></span> <a href="./src/D-FILTER-4-4.cpp">テンプレートソース</a>(D-FILTER-4-4.cpp)をダウンロードします。
<br>
<span class="olradio"><input type="radio" name="p4"></span> テンプレートソースを開いて穴埋めをします。
<br>
<span class="olradio"><input type="radio" name="p4"></span> コンパイルして実行すると1 秒地点から 0.5 秒分の音声を切り出した「 D-FILTER-4-4-out.wav 」、およびLPC係数の推定値を使った時の線形予測値 「 D-FILTER-4-4-hatx.wav 」、線形予測誤差「D-FILTER-4-4-err.wav」が出来ます。
<br>
<span class="olradio"><input type="radio" name="p4"></span> 出力された 3 つの Wave ファイルのスペクトログラム画像を表示してください。ゲインは適宜調整してください。
<br>
<span class="olradio"><input type="radio" name="p4"></span> 出力された 3 つの Wave ファイルを聴き比べて下さい。
<br>
<span class="olradio"><input type="radio" name="p4"></span> チーム内で答え合わせをして下さい。 
<br>
<span class="olradio"><input type="radio" name="p4"></span> 各自が指定場所に「ソースコード(※ 「ここから」〜「ここまで」の部分だけ)」と「スペクトログラム画像 3枚」を貼り付けて下さい。  
</div>

<br>


<br>
<p>
<input type="checkbox"><b>演習4-5 (個人):</b> AR モデルを使って自分の声をモデルとした音声合成をしてみましょう。
</p>
<div class="olradio">
<p>
<span class="olradio"><input type="radio" name="p4"></span> マイクを PC の端子に繋ぎます。
<br>
<span class="olradio"><input type="radio" name="p4"></span> マイクの設定を開いて音量調整をします。
<br>
<span class="olradio"><input type="radio" name="p4"></span> <a href="../../../lib/sound/recorder.html" onclick="window.open( '../../../lib/sound/recorder.html', 'recorder','width=300,height=200 ');return false;" >レコーダー</a>を開きます。
<br>
<span class="olradio"><input type="radio" name="p4"></span>「イー」の声を「2 秒以上」録音し、ダウンロードフォルダに音声ファイル( out.wav ) をダウンロードします。
<br>
<span class="olradio"><input type="radio" name="p4"></span> out.wav を試しに再生し、もし音が小さい場合は録音し直します。
<br>
<span class="olradio"><input type="radio" name="p4"></span> out.wav を演習フォルダに移動して「 i.wav 」に名前を変更します。
<br>
<span class="olradio"><input type="radio" name="p4"></span>同様に「イー」の声を「i.wav」、「ウー」の声を「u.wav」、「エー」の声を「e.wav」、「オー」の声を「o.wav」に保存して下さい。
<br>
<span class="olradio"><input type="radio" name="p4"></span> <a href="./src/D-FILTER-4-5.cpp">テンプレートソース</a>(D-FILTER-4-5.cpp)をダウンロードします。
<br>
<span class="olradio"><input type="radio" name="p4"></span> テンプレートソースを開いて穴埋めをします。
<br>
<span class="olradio"><input type="radio" name="p4"></span> コンパイルして実行すると合成音声 「 D-FILTER-4-5-ar.wav 」、入力信号として人工的に作成した線形予測誤差「D-FILTER-4-5-err.wav」が出来ます。
<br>
<span class="olradio"><input type="radio" name="p4"></span> 出力された 2 つの Wave ファイルのスペクトログラム画像を表示してください。 ゲインは適宜調整してください。
<br>
<span class="olradio"><input type="radio" name="p4"></span> 出力された 2 つの Wave ファイルを聴き比べて下さい。
<br>
<span class="olradio"><input type="radio" name="p4"></span> チーム内で答え合わせをして下さい。
<br>
<span class="olradio"><input type="radio" name="p4"></span> 各自が指定場所に「ソースコード(※ 「ここから」〜「ここまで」の部分だけ)」を貼り付けて下さい。  
<br>
<span class="olradio"><input type="radio" name="p4"></span> 各自が指定場所に「ソースコード(※ 「ここから」〜「ここまで」の部分だけ)」と「スペクトログラム画像 2枚」を貼り付けて下さい。 
</div>

<script>PreNext(5,4)</script>
</body>
</html>
