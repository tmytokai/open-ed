<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
<link rel="stylesheet" href="../../../seminar.css">
<style>
body.seminar{
background: #828282;
}
</style>
<title>3. Q学習で走行ルートを決める</title>
</head>
<body class="seminar">

<div class="container">

<div class="btback"><a href="../#text04">メニューへ戻る</a></div>
<div class="btback"><a href="./page02.html">前のページ</a></div>
<div class="btback"><a href="./page04.html">次のページ</a></div>

<div class="contents">

<h1>3. Q学習で走行ルートを決める</h1>

<p>
ではこのQ学習を使って走行ルートを決めてみましょう。
そのためにまず環境、エージェント、状況、行動、報酬を明確にしておく必要があります。
</p>

<p>
まず環境とエージェントに関しては簡単で
</p>

<p>
<b>環境 ＝ マップ (ルート選択画面)</b>
</p>

<p>
<b>エージェント ＝ 車 (緑の四角)</b>
</p>

<p>
となります。
</p>
<img src="./img/page03-fig1.png" alt="">

<p>
次に状況に関しては前ページの例では分岐点としましたが、今回はもう少しプログラミングらしく
</p>

<p>
<b>状況 ＝ マップの座標</b>
</p>

<p>
とします。座標は車がマップのどの位置に示すかを表す数値の組で、横方向の位置を<b>"X座標"</b>、縦方向の位置を<b>"Y座標"</b>といいます。マップの一番左の列のX座標は1で右に行くにつれて数字が増えます。またマップの一番下の行のY座標は1で上に行くに連れて数字が増えます。
</p>
<img src="./img/page03-fig2.png" alt="">


<p>
次に行動に関しては前ページの例と同様に
</p>

<p>
<b>行動 ＝ 方向を選んで移動する</b>
</p>

<p>
となります。なおプログラミングの都合から移動方向には次の数値を割り当てることにします。
</p>

<div class="table">
<table>
<thead>
<tr><th>移動する方向</th><th>数値</th></tr>
</thead>
<tbody>
<tr><td class="w30">上</td><td class="w30">1</td></tr>
<tr><td class="w30">左</td><td class="w30">2</td></tr>
<tr><td class="w30">下</td><td class="w30">3</td></tr>
<tr><td class="w30">右</td><td class="w30">4</td></tr>
</tbody>
</table>
</div>



<p>
また、移動した際にもらえる報酬のルールは次の様にします。
</p>

<p>
<b>ルール1： 道から外れたら -100 点</b>
</p>

<p>
<b>ルール2： ゴールにたどり着いたら +100 点</b>
</p>

<p>
<b>ルール3： 一度通った場所に戻ったら -100 点</b>
</p>

<p>
<b>ルール4： 道の上なら -1 点</b>
</p>

<p>
さてルール1〜3については納得できると思いますがルール4の意味が分からないかもしれませんね。それでは逆に移動後に道の上なら +1 点としたらどうなるか考えてみましょう。もしそうすると「一度通った道はその先に行き止まりがあっても必ず選択する」ことになってしまうので都合が悪くなります。よって報酬を -1 とし、一度探索した道は次回以降はなるべく選択しないようにするためペナルティを与えています。
</p>

<p>
それでは実際にシミュレータを動かして座標と報酬を確認してみましょう。まず自動運転車と書いてあるメニューの中にある
</p>
<img src="../text02/img/page02-fig1.png" alt="">
<br>
<img src="../text02/img/page02-fig3.png" alt="">

<p>
ブロックを順に押してルート選択画面を開いて下さい。次に
</p>
<img src="./img/page03-fig3.png" alt="">

<p>
のように、やはりシミュレータ用ブロックの中にある変数「X座標」「Y座標」「報酬」にチェックを入れてそれらの数値を表示して下さい。あとは
</p>
<img src="../text02/img/page02-fig5.png" alt="">

<p>
ブロックを適当に押して、車(緑の四角)が動くと「X座標」「Y座標」「報酬」の数値がどう変化するのか確認して下さい。
確認が終わったら変数「X座標」「Y座標」「報酬」のチェックを外して非表示に戻してください。
</p>

</div>

<div class="btback"><a href="../#text04">メニューへ戻る</a></div>
<div class="btback"><a href="./page02.html">前のページ</a></div>
<div class="btback"><a href="./page04.html">次のページ</a></div>

</div>


</body>
</html>
