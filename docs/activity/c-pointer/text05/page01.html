<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="../../../common.css">
<title>配列とポインタ変数</title>
</head>
<body>

<p>
<a href="../">アクティビティ: C言語のポインタ</a>
<br>
学習項目: [5] 配列とポインタ変数
</p>

<h2>1. 配列とポインタ変数</h2>


<p>
ひとつ前の学習項目で挙げたポインタ変数にアドレス値を代入する 3 つの方法を改めて示します。
</p>

<div class="info">
<input type="checkbox"><b>ポインタ変数にアドレス値を代入する 3 つの方法:</b>

<p>
(1) アドレス値を直接代入
</p>

<p>
(2) アドレス演算子を使って変数のアドレスを代入
</p>

<p>
(3) 配列の先頭アドレスを代入
</p>
</div>

<p>
ここでは(3)の方法について具体的に説明します。
</p>


<div class="info">
<input type="checkbox"><b>配列の先頭アドレスを代入する方法の詳細:</b>

<p>
ポインタ変数 = 配列の名前
</p>

<pre class="wrap">
(例) ※ポインタ変数に指定する型と配列の型は合わせる必要があります

char a[3];
char *pa;

pa = a;
</pre>
</div>

<p>
この様にポインタ変数に配列の先頭アドレスを代入することで「ポインタ変数に配列を参照させる」ことが出来ます。
<br>
例えば上の例の char 型のポインタ変数 pa に char 型の配列 a を参照させた時のメモリ空間の状態が次の図 1 です。
</p>

<div class="info">
<input type="checkbox"><b>図1: 矢印は「参照」を意味する: </b>

<pre class="wrap">
char a[3]; // OS が 0x01 番地(※1)から配列 a の領域を取る
char *pa; // OS が 0xF0 番地(※1)から 4 バイト分(※2)を pa の領域とする
a[0] = 100;   // a[0] に 100 を代入する
a[1] = 101;   // a[1] に 101 を代入する
a[2] = 102;   // a[2] に 102 を代入する
pa = a;  // pa に a の先頭アドレス、つまり今回は 0x01 を代入する
</pre>

<img src="./img/page01-fig1.png" alt="">

<p>
※1. 例なのでアドレス値は適当に決めています。
<br>
実際には OS がアドレスを決めます。
</p>

<p>
※2. 例なのでポインタ変数のデータサイズは 4 バイトにしていますが、実際にはシステムによってポインタ変数のデータサイズは変わります。
</p>
</div>


<p>
さて変数ひとつの参照の時と違い、配列の場合は各要素ごとに参照の矢印が引かれていることに着目して下さい。
</p>

<div class="info">
<input type="checkbox"><b>配列の各要素の参照:</b>

<p>
ポインタ変数を使って配列 a の i 番目の要素 a[i] の要素の値を取得したり値を代入出来る
</p>

<p>
(1) 間接演算子を使う記法: *(pa+i)
</p>
<p>
又は
</p>
<p>
(2) []を使う記法: pa[i]
</p>

<pre class="wrap">
(例) メモリ空間が図 1 の状態になっているなら

printf("%d\n", *(pa+1) );  ・・・ a[1] の値(=101)を表示する
printf("%d\n", pa[0] );  ・・・ a[0] の値(=100)を表示する

*pa = 1; ・・・ a[0] に 1 を代入する(※)
pa[2] = 3;・・・ a[2] に 3 を代入する

※ *(pa+0)と同じ意味です
</pre>

</div>

<p>
どちらの記法を使っても同じ結果になりますので基本的に好みの方を使って結構です。 
<br>ただしチームで開発する時はみんながバラバラの記法をすると混乱しますのでどちらかに統一した方が良いと思います。
</p>

</body>
</html>
