<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css">
<!--
pre.prog { 
border: 2px solid black;
padding-top:10px;
padding-left:10px;
padding-right:10px;
padding-bottom:10px;
}

table.info{
border: 2px solid #000000;
font-weight: bold;
}

td.info{
padding: 10px;
line-height: 130%;
}

table.refact{
border: 2px solid #000000;
}

td.refact{
padding: 10px;
line-height: 130%;
}
-->
</style>
<title>アジャイル開発</title>
</head>
<body>
<h1>アジャイル開発</h1>
<br>
<h2>1. 概要</h2>

英語でアジャイル(agile)は「素早い」とか「迅速」という意味で、
アジャイル型ソフトウェア開発とは、その名の通り「ソフトウェアを迅速に開発して完動品をリリースするための開発手法」のことです。
<br>
<br>
アジャイル開発は反復型開発手法の一種であり、開発工程を「<b>イテレーション</b>」という短い(だいたい1〜4週間の)期間に区切り、各イテレーション毎に開発を繰り返します。
<br>
<br>
さらに開発するだけでなく、各イテレーションの終了時にソフトウェアのリリースも行います。
<br>
なお期間が短いのでベータ版くらいしか出せないと思うかもしれませんが、アジャイルではデバッグ済みの完動品を世に出します。
<br>
<br>
このようにアジャイルでは1〜4週間という短い期間の間に開発と完動品のリリースを何回も繰り返すことになりますので、
ウォーターフォールの様に最初に全ての仕様を決め、一気にコーディングし、一気にテストし、最後にリリース、なんてことをするのは不可能です。
<br>
<br>
ではどうするかというと、タスク(作業内容)の優先度を決めて<b>スコープ</b>(そのイテレーション内で作業する範囲)を作り、
スコープに含まれるタスクだけに絞って開発＆デバッグ＆リリースし、優先度の低い他のタスクは次以降のイテレーションにたらい回しします。またスコープを作成するとタスクを実行する時期と期間が決まりますので、同時にスケジュール管理をしていることにもなります。
<br>
<br>
たらい回しと書くとあまり良い印象を受けませんが、優先度を付けて必要なタスクから片付けることで、いつまでもグダグダと開発をし続けてリリースの目処も立たないみたいなリスクを避け、迅速な開発と完動品のリリースが可能になります。
<br>
<br>
またアジャイルは開発者間の意思疎通を重要視しています。
<br>
ちゃんと意思疎通が出来てないチームが迅速な開発を出来る訳が無いのでこれは当たり前ですね。
<br>
なお日本人がおちいりやすい完璧主義はアジャイル開発の最大の敵なので悔い改めましょう。
<br>
<br>
<b>アジャイルの特徴・原則：</b>
<table class="info"><tr><td class="info">
・ 迅速(agile)に開発する
<br><br>
・ 工程を1〜4週間のイテレーション(反復)に区切る
<br><br>
・ 各イテレーション毎に開発とリリースを繰り返す
<br><br>
・ ベータ版ではなくてデバッグ済みの完動品をリリースする
<br><br>
・ スコープ(作業範囲)をきっちり決めて優先度の高いタスクから実行する
<br><br>
・ スコープを守ることはスケジュール管理でもある
<br><br>
・ 開発者間の意思疎通を重要視する
<br><br>
・ 完璧主義は時間のムダ使いなので止める
</td><tr></table>

<br>
<br>
<h2>2. 開発の流れ(プロセス)</h2>

理屈は分かったけどじゃあ具体的にアジャイルではどういう流れで開発するの？という疑問が出てきたと思います。
<br>
<br>
ウォーターフォールの時は要求定義→設計→実装→テスト→リリース→保守という流れがあったので大変分かりやすかったのですが、
実はアジャイルは最近(と言っても10年以上経ってますが)出来た手法であり、
ウォーターフォールのように開発の流れがきちんと体系化されているわけではありません。
<br>
<br>
逆に言えば上で書いた原則に従って開発してさえいれば「アジャイル」な開発手法になりますので、
メジャーな手法からマイナーな手法まで色んな手法が我こそは真のアジャイル開発だと群雄割拠している状態です。
<br>
<br>
という訳でここではいくつかの開発手法を順に示して行き、用語についてはその都度説明していきたいと思います。
<br>
<br>
<b>(1) 基本モデル</b>
<br>
<br>
まずアジャイルの基本的なモデルは下の図です。
<br>
<img src="./basic.png">
<br>
概要で説明したように工程を複数のイテレーションに分け、各イテレーション内で開発とリリースを行い、
実行するタスクが無くなったら保守モードに移行します。
<br>
<br>
大まかな流れはこの通りなのですが、やっかいなのは具体的な開発の流れや内容についてはそのチームの裁量に任されていることです。
<br>
つまり、この基本モデルだけ示されてさあ開発しろと言われても、いったい何から手を付けて良いのかさっぱり分かりません。
<br>
<br>
<br>
<b>(2) カウボーイコーディング</b>
<br>
<br>
ではどうするか？
<br>
<br>
最初に思いつくのはリーダーすら置かず、チーム内の開発者がイテレーション内で各自パラバラ好きなように開発をおこなうことです。
<br>
ソースコードを適当に書いて行き(他の人が書いた箇所は黙って消すか上書き)、そこそこ動くようになったら、まあこれで良いやとリリースします。
<br>
このような手法を「<b>カウボーイコーディング</b>」と言います。
<br>
<br>
当然ですがそんなやり方ではまともなソフトウェアが出来る訳ありませんし、
そもそもアジャイルで重要視している「意思疎通」が欠如してますので、
<u><b>カウボーイコーディングはアジャイル開発として認められていません</b></u>。
<br>
<br>
チーム内にエース級が一人いて全部自分でやろうとしたり、メンバー間の仲が悪かったりすると良くこの状況に陥りますので気をつけましょう。「意思疎通」が大事です。
<br>
<br>
<br>
<b>(3) XP</b>
<br>
<br>
カウボーイコーディングでは話にならないので、やっぱり先人の偉い人が考えたアジャイル開発手法を使うことにしましょう。
<br>
<br>
一番メジャーなアジャイル開発手法は「<b>XP(エクストリーム・プログラミング)</b>」です。
<br>
XPでは迅速な開発の役に立つ具体的なプラクティス（実践）がいくつか定義されています。
<br>
<br>
例えば
<br>
<br>
<b>ペアプログラミング</b> ・・・ 2人一組でプログラミングしましょう
<br>
<br>
<b>リファクタリング</b> ・・・ コードを随時改善していきましょう
<br>
<br>
などは皆さんも聞いたことがあると思いますが、これらはXPで定義されているプラクティスです(語尾が「〜ましょう」になっているのはXPがプラクティスだからです)。
<br>
他にも
<br>
<br>
<b>テスト駆動開発、CI(継続的インテグレーション)</b> ・・・ テストとビルドを自動化しましょう(後で詳しく説明します)
<br>
<br>
<b>反復、短期リリース</b> ・・・ 工程はイテレーション毎に分けて小まめにリリースしましょう
<br>
<br>
<b>YAGNI</b>(You Aren't Going to Need It)・・・ちゃんとスコープを決めてしなくても良い余計な事をしないようにしましょう
<br>
<br>
など、色々役に立つプラクティスがXPに含まれています。
<br>
<br>
ならばXPを使って早速開発開始だと行きたい所ですが、実はまだ問題があって、
<b>XPは「この問題を回避するにはこうしましょう」という解決方法は示してくれるのですが、
「こういう順番で開発をするとうまく行くよ」という具体的な開発の流れは示してくれない</b>のです。
<br>
<br>
つまりXPを導入したところで状況は(1)の基本モデルの時と変わらないので、
具体的にどう開発すれば良いのかはやはり自分らで考えないといけません。
<br>
<br>
<br>
<a name="scrum"><b>(4) スクラム</b>
<br>
<br>
カウボーイコーディングは話にならないけど、XPを使っても具体的にどうしたら良いのか良くわからん。でも
自分らで開発の流れを考えるのも面倒だ。
<br>
<br>
そういう場合は別のメジャーなアジャイル開発手法である「<b>スクラム</b>」を使うのも一つの手です。
<br>
スクラムはフレームワーク、つまり開発の流れを具体的に示してくれます。
<br>
<br>
ここではこのスクラムについて説明していきますが、スクラムはアジャイルの概念が出来る前からある開発手法ですので、一部の用語(スプリント＝イテレーションとか)がスクラムに独特な物になっていますので注意して下さい。
<br>
またXPとスクラムは同じアジャイル開発手法でも向いてる方向性が違います(XPはプラクティス、スクラムはフレームワーク)ので、
XPのプラクティスがスクラムに取り入れられる事もままあります。
<br>
<br>
前置きはこれくらいにして、少し縦長くて申し訳ないのですが、スクラムによる開発の流れを下の図に示します。
<br>
ちなみにスクラムにも色々な流儀やローカルルールがあるので、下の図はあくまで典型的なスクラムの流れであることに注意して下さい。
<br>
<br>
<img src="scrum.png">
<br>
<br>
<a name="kickoff"><b>(4-1) キックオフミーティング</b>
<br>
<br>
まず開発が始まったら<b>キックオフミーティング</b>(立ち上げ会議)でチームメンバーと<b>スクラムマスター</b>(管理者)を決めます。
<br>
キックオフでは記述書暫定版やプロジェクトスコープを作成する場合もあります。
<br>
<br>
<b>スクラムマスター</b>はチームの管理者のことですが、全ての責任を持つ所謂リーダーとはちょっと違う存在です。
<br>
あくまで管理者であるスクラムマスターはチームがうまく回っているかどうかを管理することだけが仕事であり、
開発作業に対する責任はチームに属する全メンバーが等しく持ちます
(とは言うものの、実際には話がまとまらない時はリーダー的強権を発動して無理矢理まとめたり、問題が起きたらマスターが責任を取らされることも多いのですが)。
<br>
<br>
<br>
<a name="rplan"><b>(4-2) リリースプランニングミーティング</b>
<br>
<br>
次に<b>リリースプランニングミーティング</b>(全体計画会議)を行って要求定義から<b>全体仕様書</b>及び<b>プロダクトバックログ</b>(全体的なタスクリスト)を作成します。
<br>
<br>
<b>全体仕様書</b>は要求定義を元に作成した全体の大まかな仕様書で、この辺はウォーターフォールと同様です。
<br>
この全体仕様書は原始的に紙と鉛筆で作成する場合もあれば、
最初から電子ドキュメント化してクラウド上で<a href="../git/">git の様なバージョン管理システム</a>を使って管理する場合もあります。
<br>
<br>
<b>プロダクトバックログ</b>は開発する際に必要とされる全体の大まかな作業内容(タスク)の一覧(リスト)です。
<br>
全体仕様書を元にタスクをリストアップした後、重要度や難易度から優先順位をつけて、どのイテレーションでどのタスクをどの作業時間で実行するかという作業範囲(つまり<b>スコープ</b>)を決めていきます。
<br>
<br>
概要で書いたように、このスコープ作成作業はスケジュール管理も兼ねていますので大変重要な作業です。
<br>
よって<u><b>物理的に無理なタスクを無理矢理スコープに入れることは、スケジュールの遅れ、ひいてはリリース延期につながるので止めましょう</b></u>。
<br>
上で出てきたXPの<b>YAGNI</b>はこのことを戒めるプラクティスです。
<br>
<br>
なお、プロダクトバックログは原始的にホワイトボードなどを使ってそのタスクを手書き管理する場合もあれば、
もっと近代的にクラウド上で<a href="../redmine/">redmine の様なチケット管理システム</a>を使ってタスクを管理する場合もあります。
<br>
<br>
またウォーターフォールと同様、<a href="../wbs/">WBS</a>をパックログと一緒に作成してスケジュール管理に用いる事も多いです。
<br>
<br>
<br>
<b>(4-3) スプリント</b>
<br>
<br>
さてリリースプランニングで大まかな全体計画が出来たので、いよいよ<b>スプリント</b>に入ります。
<br>
スプリントはスクラムで使われるイテレーションの別名で全く同じ意味で使われています。
<br>
またスクラムではスプリント内も作業工程がいくつかに分かれています。
<br>
<br>
<a name="spm"><b>(4-3-1) スプリントプランニングミーティング</b>
<br>
<br>
スプリントが始まったらまず<b>スプリントプランニングミーティング</b>(スプリント計画会議)を行って、
<b>全体計画の見直し</b>(もしあれば)をし、<b>詳細仕様書</b>及び<b>スプリントバックログ</b>(スプリントで実行するタスクリスト)を作成します。
<br>
<br>
もし<b>全体計画に見直し</b>があれば、スプリントを開始する前のこの段階で全体仕様書とプロダクトバックログを更新しておきます
(別にいつやっても良いのですがたいてい悲劇が待っています)。
<br>
<br>
<b>詳細仕様書</b>はこのスプリントで開発する機能の詳細な仕様書です。
<br>
まず全体仕様書とプロダクトバックログからこのスプリントのスコープ(やる事や実装する機能、及び作業期間)を確認し、より詳細な要求定義を行い、詳細仕様書を作成します。
<br>
くれぐれもスコープから逸脱しないように気を付けて仕様書を作成して下さい(スコープ＝スケジュール管理からの逸脱はリリース延期につながります！)。
<br>
<br>
<b>スプリントバックログ</b>はこのスプリントで実行する詳細なタスクリストで、プロダクトバックログと同様に優先度別にタスクをリストアップし、このスプリント内でのローカルなスコープを作成します。
<br>
また各タスクの担当者もこの時点で決めておきます。
<br>
<br>
<a name="dsm"><b>(4-3-2) デイリースクラムミーティング</b>
<br>
<br>
ここから通常の開発作業に入りますが、その日の開発を始める前に毎回チーム全員が集まって<b>デイリースクラムミーティング</b>(日次スクラム会議)を行います。
<br>
<br>
このミーティングでは
<br>
<br>
・ 現状報告
<br>
・ <u><b>スコープを逸脱してる人がいないかの確認</b></u>
<br>
・ スケジュールの確認
<br>
・ 当日の作業内容の確認
<br>
<br>
などを行います。それで、もしスコープを逸脱してる人がいた場合はリリース遅れにつながるのでマスターがやめさせます(どうしてもやりたいとほざく場合は次のスプリントでやらせます)。
<br>
逆に予定よりタスクが遅れているメンバーがいたら、進んでいるメンバーがXPの<b>ペアプログラミング</b>をしたり<b>プロジェクト内教育</b>を実施して遅れを取り戻します。
<br>
<br>
<a name="dev"><b>(4-3-3) 開発作業</b>
<br>
<br>
ここから通常の<b>開発作業</b>に入ります。
<br>
作業内容は「チケットの確認、コーディング＆テスト、commit/pull/push、チケット更新」などですが、人によっては「マニュアル作成、イラスト作成、音楽作成」などが作業になることもあるでしょう。
<br>
<br>
さてスクラムではこの「コーディング＆テスト」作業において上で出てきたXPの<b>テスト駆動開発、CI(継続的インテグレーション)</b>を導入することが多いです。
<br>
<br>
テスト駆動開発は「テストコードを予め作っておいてデバッグ作業(正確には単体テスト)を自動化しましょう」というプラクティス、CIは
「ビルド(正確には結合テスト)作業を自動化してソフトウェアを常に動く状態に保ちましょう」というプラクティスです。
<br>
つまりコーディングとテスト(とビルド)作業を明確に分けているウォーターフォールと違い、<b>アジャイルではコーディングとテストとビルド作業を同時並行的に行います</b>。
<br>
<br>
通常はコーディングをするとテストとビルド作業を自動的にしてくれるシステムを使うのですが、原始的に手作業(つまり手動でテストして、pullしてビルドして正常動作を確認したらpush)でやる場合も何だかんだ言って多いです。
<br>
<br>
いずれにしろ、「<b>常にテストする</b>」ことと「<b>常に動く状態に保つ</b>」ことに気をつけ、<u><b>リモートリポジトリにソフトが動かなくなるようなコードをpushすることは絶対に避けましょう</b></u>。
<br>
<br>
<a name="rev"><b>(4-3-4) スプリントレビュー、振り返り、リリース</b>
<br>
<br>
スプリントの終わりでは<b>スプリントレビュー</b>と<b>振り返り</b>を行います。
<br>
<br>
<b>スプリントレビュー</b>ではチェックリスト等を活用して品質の確認を行います。もし致命的なバグを見つけたら修正して再レビューします。
<br>
最初に書いた通り各スプリントでリリースするのは完動品ですので、動かない代物をえいやとリリースするのは止めましょう(出来れば避けたい最終手段はリリース延期です)。
<br>
<br>
レビューが終わったら<b>振り返り</b>で反省点や次のスプリントで追加したい機能等を話し合ってドキュメントにまとめます。
<br>
<br>
その後<b>リリース</b>をしてスプリント終了です。
<br>
<br>
<br>
<b>(4-4) クロージング、保守</b>
<br>
<br>
この様なスプリントを何回か繰り返したら<b>クロージング</b>(全体の振り返り)を行なって開発終了となります。その後保守に入ります。
<br>
<br>
</body>
</html>
