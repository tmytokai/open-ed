<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
<link rel="stylesheet" href="../../../common.css">
<script src="../../../common.js"></script>
<script src="../../../mathjax.js"></script>
<title>演習</title>
</head>
<body>

<nav class="brcr">
<ol>
<li><a href="../">アクティビティ: 自己回帰モデル</a></li>
<li>学習項目: [1] 自己回帰モデル</li>
<li><script>GetTitle()</script></li>
</ol>
</nav>

<h2><script>GetTitle()</script></h2>

<br>
<h2><a href="./page01.html">自己回帰モデル</a></h2></h2>

<br>
<p>
<input type="checkbox"><b>演習1-1 (個人):</b> 以下の仕様の自己回帰モデルから信号列 $x[i]$ を生成してみましょう。
</p>

<div class="info">
<p>
<b>仕様:</b>
</p>
<ol>
<li> 次数は L = 4 </li>
<li> 信号の長さは N = 100 </li>
<li> LPC 係数は a[1] = 0.1、a[2] = 0.3、a[3] = -0.2、a[4] = 0.15 </li>
<li> 負の時刻の実現値は 0 とする。つまり $x[-1] = x[-2] = x[-3] = x[-4] = 0$ </li>
<li> ホワイトノイズは平均 0、分散 1 の時刻毎に独立な正規乱数</li>
</ol>
</div>
<div class="olradio"> 
<p>
<span class="olradio"><input type="radio" name="p1"></span> Jupyter Notebook を起動します。 
<br>
<span class="olradio"><input type="radio" name="p1"></span> 新規ノートブックを作って「AR_1_1」に名前を変更します。
<br>
<span class="olradio"><input type="radio" name="p1"></span> 一番上のセルに<a href="./src/AR_1_1.txt">テンプレート</a>の内容をコピーします。
<br>
<span class="olradio"><input type="radio" name="p1"></span> 穴埋め問題を解いて下さい。
<br>
<span class="olradio"><input type="radio" name="p1"></span> 実行すると 1 つの CSV ファイル「AR_1_1_x.csv」が出力されます。この CSV ファイルは信号値 $x[i]$ の N = 100 個分の値です。
<br>
<span class="olradio"><input type="radio" name="p1"></span> 信号値のCSVファイル(AR_1_1_x.csv)を表計算ソフトで開いてください。
<br>
<span class="olradio"><input type="radio" name="p1"></span> 一行目に空行を挿入し、1 行目の最初の列に「i」、次の列に「x[i]」 と入力します。
<br>
<span class="olradio"><input type="radio" name="p1"></span> グラフを挿入します。グラフの種類は散布図、点なし、線あり、平滑化なしとします。
<br>
<span class="olradio"><input type="radio" name="p1"></span> 「名前を付けて保存」でシートを表計算形式で保存します。ファイル名は「AR_1_1_x」として下さい(拡張子は使用する表計算ソフトによる)。
<br>
<span class="olradio"><input type="radio" name="p1"></span> 指定場所に「信号値のグラフ」を貼り付けて下さい。  
</p>
</div>

<br>
<h2><a href="./page02.html">線形予測モデル</a></h2></h2>

<br>
<p>
<input type="checkbox"><b>演習1-2 (個人):</b> 演習 1-1 で生成した信号列 $x[i]$ の線形予測値を求めてみましょう。
</p>

<div class="olradio"> 
<p>
<span class="olradio"><input type="radio" name="p2"></span> 新規ノートブックを作って「AR_1_2」に名前を変更します。
<br>
<span class="olradio"><input type="radio" name="p2"></span> 一番上のセルに<a href="./src/AR_1_2.txt">テンプレート</a>の内容をコピーします。
<br>
<span class="olradio"><input type="radio" name="p2"></span> 穴埋め問題を解いて下さい。
<br>
<span class="olradio"><input type="radio" name="p2"></span> 実行すると 1 つの CSV ファイル「AR_1_2_hat_x.csv」が出力されます。この CSV ファイルは線形予測値 $\hat{x}[i]$ の N = 100 個分の値です。
<br>
<span class="olradio"><input type="radio" name="p2"></span> 線形予測値の CSV ファイルを表計算ソフトで開いてください。
<br>
<span class="olradio"><input type="radio" name="p2"></span> 一行目に空行を挿入し、最初の列の先頭に「i」、次の列の先頭に「hat_x[i]」と入力します。
<br>
<span class="olradio"><input type="radio" name="p2"></span> グラフを挿入します。グラフの種類は散布図、点なし、線あり、平滑化なしとします。
<br>
<span class="olradio"><input type="radio" name="p2"></span> 縦軸の範囲を演習1-1で書いたグラフと合わせます。
<br>
<span class="olradio"><input type="radio" name="p2"></span> 「名前を付けて保存」でシートを表計算形式で保存します。ファイル名は「AR_1_2_hat_x」として下さい(拡張子は使用する表計算ソフトによる)。
<br>
<span class="olradio"><input type="radio" name="p2"></span> チーム内で答え合わせをし、演習1-1で作成した元の信号 $x[i]$ のグラフと線形予測値 $\hat{x}[i]$ のグラフを見比べてみましょう。
</p>
<p>
※ $\hat{x}[i] = x[i]-e[i]$ なので、$\hat{x}[i]$ は各時刻でホワイトノイズ $e[i]$ を取り除いた $x[i]$ の予測値とみなせます
</p>
<p>
<span class="olradio"><input type="radio" name="p2"></span> 指定場所に「線形予測値のグラフ」を貼り付けて下さい。  
</p>
</div>

<br>
<h2><a href="./page03.html">線形予測誤差</a></h2></h2>

<br>
<p>
<input type="checkbox"><b>演習1-3 (個人):</b> 演習 1-1 で生成した信号列 $x[i]$ の線形予測誤差を求めてみましょう。
</p>

<div class="olradio"> 
<p>
<span class="olradio"><input type="radio" name="p3"></span> 新規ノートブックを作って「AR_1_3」に名前を変更します。
<br>
<span class="olradio"><input type="radio" name="p3"></span> 一番上のセルに<a href="./src/AR_1_3.txt">テンプレート</a>の内容をコピーします。
<br>
<span class="olradio"><input type="radio" name="p3"></span> 穴埋め問題を解いて下さい。
<br>
<span class="olradio"><input type="radio" name="p3"></span> 実行すると 1 つの CSV ファイル「AR_1_3_hat_e.csv」が出力されます。この CSV ファイルは線形予測誤差 $\hat{e}[i]$ の N = 100 個分の値です。
<br>
<span class="olradio"><input type="radio" name="p3"></span> 線形予測誤差の CSV ファイルを表計算ソフトで開いてください。
<br>
<span class="olradio"><input type="radio" name="p3"></span> 一行目に空行を挿入し、最初の列の先頭に「i」、次の列の先頭に「hat_e[i]」と入力します。
<br>
<span class="olradio"><input type="radio" name="p3"></span> グラフを挿入します。グラフの種類は散布図、点なし、線あり、平滑化なしとします。
<br>
<span class="olradio"><input type="radio" name="p3"></span> 縦軸の範囲を演習1-1で書いたグラフと合わせます。
<br>
<span class="olradio"><input type="radio" name="p3"></span> 「名前を付けて保存」でシートを表計算形式で保存します。ファイル名は「AR_1_3_hat_e」として下さい(拡張子は使用する表計算ソフトによる)。
<br>
<span class="olradio"><input type="radio" name="p3"></span> チーム内で答え合わせをし、演習1-1で作成した元の信号 $x[i]$ のグラフ、演習2-2で作成した線形予測誤差 $\hat{x}[i]$ のグラフと線形予測誤差 $\hat{e}[i]$ のグラフを見比べてみましょう。
</p>
<p>
※ $\hat{e}[i] = x[i]-\hat{x}[i]$ なので、$\hat{e}[i]$ は各時刻で付加されたホワイトノイズ $e[i]$ の予測値となります
</p>
<p>
<span class="olradio"><input type="radio" name="p3"></span> 指定場所に「線形予測誤差のグラフ」を貼り付けて下さい。  
</p>
</div>


<br>
<h2><a href="./page04.html">レビンソン・ダービン・アルゴリズム</a></h2>

<br>
<p>
<input type="checkbox"><b>演習1-4 (個人):</b> レビンソン・ダービン・アルゴリズムを使って演習 1-1 で生成した信号列 $x[i]$ の LPC 係数を推定してみましょう。なお今回は信号の長さを N = 50000 とします。
</p>

<div class="olradio"> 
<p>
<span class="olradio"><input type="radio" name="p4"></span> 新規ノートブックを作って「AR_1_4」に名前を変更します。
<br>
<span class="olradio"><input type="radio" name="p4"></span> 一番上のセルに<a href="./src/AR_1_4.txt">テンプレート</a>の内容をコピーします。
<br>
<span class="olradio"><input type="radio" name="p4"></span> 穴埋め問題を解いて下さい。
<br>
<span class="olradio"><input type="radio" name="p4"></span> 実行すると L=4 個の LPC 係数の真の値と推定値、及びホワイトノイズの分散の推定値が表示されます。
<br>
<span class="olradio"><input type="radio" name="p4"></span> チーム内で答え合わせをし、真の値と推定値の値が近いことを確認して下さい。
<br>
<span class="olradio"><input type="radio" name="p4"></span> 指定場所に「表示結果」をコピーして貼り付けて下さい。  
</p>
</div>

<br>
<h2><a href="./page05.html">推定モデルの利用</a></h2>

<br>
<p>
<input type="checkbox"><b>演習1-5 (個人):</b> 自分の声(あ、い、う、え、お)をサンプリングしてスペクトログラムを見てみましょう。
</p>
<div class="olradio">
<p>
<span class="olradio"><input type="radio" name="p5"></span> フォルダ「AR_1_5」を新規作成し、その中に移動します 
<br>
<span class="olradio"><input type="radio" name="p5"></span> マイクを PC の端子に繋ぎます。
<br>
<span class="olradio"><input type="radio" name="p5"></span> マイクの設定を開いて音量調整をします。
<br>
<span class="olradio"><input type="radio" name="p5"></span> <a href="../../../lib/sound/recorder.html" onclick="window.open( '../../../lib/sound/recorder.html', 'recorder','width=300,height=200 ');return false;" >レコーダー</a>を開きます。もしブラウザからマイク権限を求められたら許可します。
<br>
<span class="olradio"><input type="radio" name="p5"></span>「アー」の声を「2 秒以上」録音し、ダウンロードフォルダに音声ファイル( out.wav ) をダウンロードします。
<br>
<span class="olradio"><input type="radio" name="p5"></span> out.wav を試しに再生し、もし音が小さかったり、逆に音割れが生じた場合はマイクのボリュームを調整して録音し直します。
<br>
<span class="olradio"><input type="radio" name="p5"></span> out.wav をダウンロードフォルダから AR_1_5 フォルダに移動して「 a.wav 」に名前を変更します。
<br>
<span class="olradio"><input type="radio" name="p5"></span> 同様に「イー」の声を「i.wav」、「ウー」の声を「u.wav」、「エー」の声を「e.wav」、「オー」の声を「o.wav」に録音及び保存して下さい。 
<br>
<span class="olradio"><input type="radio" name="p5"></span> 各音声のスペクトログラム画像を作成して下さい。
</p>
<p>
(参考) スペクトログラム画像の作成方法: $ sox 入力.wav -n spectrogram -z (デシベル) -o 出力.png 
<br>
デシベルは適宜調整(今回の例では 60 位が目安)
</p>
<p>
<span class="olradio"><input type="radio" name="p5"></span> チーム内で画像を見比べて下さい。 
<br>
<span class="olradio"><input type="radio" name="p5"></span> 指定場所に「スペクトログラム画像(あ、い、う、え、お)」を貼り付けて下さい。また「5 つの音声ファイル」をアップロードしてください。
</div>


<br>
<p>
<input type="checkbox"><b>演習1-6 (個人):</b> 自分の声を自己回帰モデルによりモデル化して音声合成をしてみましょう。
</p>

<div class="olradio"> 
<p>
<span class="olradio"><input type="radio" name="p6"></span> フォルダ「AR_1_6」を新規作成し、その中に移動します 
<br>
<span class="olradio"><input type="radio" name="p6"></span> フォルダ「AR_1_6」の中に演習 1-5 で録音した 5 つの音声ファイルをコピーします。
<br>
<span class="olradio"><input type="radio" name="p6"></span> フォルダ「AR_1_6」の中に main.cpp を作成します 
<br>
<span class="olradio"><input type="radio" name="p6"></span> main.cpp を開き、ファイルの中身を<a href="./src/AR_1_6.txt">テンプレートソース</a>の内容に置き換えて下さい。 
<br>
<span class="olradio"><input type="radio" name="p6"></span> テンプレートファイルの記述に従って ? の部分を上から穴埋めしてプログラムを完成させて下さい。
<br>
<span class="olradio"><input type="radio" name="p6"></span> コンパイルして実行すると 2 つの音声ファイル(AR_1_6_x.wav、AR_1_6_e.wav)が出力されます。AR_1_6_x.wav が自分の声から作った自己回帰モデルより出力された音声、AR_1_6_e.wav が自己回帰モデルへの入力信号(パルス音)です。
<br>
<span class="olradio"><input type="radio" name="p6"></span> チーム内で答え合わせをして下さい。
<br>
<span class="olradio"><input type="radio" name="p6"></span> 指定場所に「AR_1_6_x.wav」と「AR_1_6_e.wav」をアップロードしてください。
</p>
</div>

<script>PreNext(6,5)</script>
</body>
</html>
