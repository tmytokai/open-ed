<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
<link rel="stylesheet" href="../../../common.css">
<script src="../../../common.js"></script>
<title>4. Unityの座標系</title>
</head>
<body>

<nav class="brcr">
<ol>
<li><a href="../">アクティビティ: Unity 入門</a></li>
<li>学習項目: [1] Unity の基本</li>
<li><script>GetTitle()</script></li>
</ol>
</nav>

<h2><script>GetTitle()</script></h2>

<p>
前のページで特に説明も無くゲームオブジェクトの座標設定や回転を行いましたがもう少し詳しく説明します。
</p>

<br>
<h3>
1. 左手系によるゲームオブジェクトの座標の設定
</h3>

<p>
まず大前提として Unity は図1に示している「<b>左手系</b>」と呼ばれる座標系を使っています。
</p>


<br>
<b>図1. 左手系の座標系</b>
<br>
<img src="./img/page04-fig1.png" alt="">

<p>
図1の各矢印が x、y、z 軸を表しますので、つまり
</p>

<ul>
<li>左手の親指 → x 軸</li>
<li>左手の人差指 → y 軸</li>
<li>左手の中指 → z 軸</li>
</ul>

<p>
に対応しています。
<br>
なお各軸の矢印の方向(＝左手の各指が向いている方向)がプラス側の方向になります。
</p>

<p>
さてプロジェクトを新規作成した直後の状態では Game ビューの横方向が x 軸、縦方向が y 軸、奥行きが z 軸となっていますので、例えばあるゲームオブジェクトの Position の x 値を増やすとそのゲームオブジェクトの x 座標値が大きくなりますので右方向に移動します。
<br>
逆に x 値を減らすと左方向にゲームオブジェクトが移動します。
<br>
y、z軸方向も同じ様に動きます。
</p>
<p>
では実際に「HAKO」を使って座標移動を確認してみましょう。
</p>

<div class="info">

<div class="olradio"> 
<p>
<span class="olradio"><input type="radio" name="p1"></span> ヒエラルキーで「HAKO」をクリックして インスペクターに情報を表示する。
<br>
<span class="olradio"><input type="radio" name="p1"></span> インスペクターの Transform の Position の x の値を増やしたり減らしたりして理論通りに移動することを確かめる。
<br>
<span class="olradio"><input type="radio" name="p1"></span> 同様に Position の y の値を増やしたり減らしたりして理論通りに移動することを確かめる。
<br>
<span class="olradio"><input type="radio" name="p1"></span> 同様に Position の z の値を増やしたり減らしたりして理論通りに移動することを確かめる。
<br>
<span class="olradio"><input type="radio" name="p1"></span> 確認が終わったら (x,y,z) の値を (1,2,0) に戻す。
</p>
</div>

</div>


<br>
<h3>
2. 左ネジの法則によるゲームオブジェクトの回転
</h3>

<p>
Unity は「左ねじの法則」と呼ばれる規則に従ってゲームオブジェクトの回転を行います(図2)。
</p>

<br>
<b>図2. 左ねじの法則</b>
<br>
<img src="./img/page04-fig2.png" alt="">

<p>
各回転軸の矢印の方向に向かって左ねじを締める向き、つまり半時計回りがプラス回転になります。
</p>

<p>
なおオブジェクトの座標指定の時は x、y、z 座標の値をセットする順番は自由でしたが、回転の場合は角度をセットする順番によってオブジェクトの向きが変わります。
<br>
Unity の場合は z 軸 → x 軸 → y 軸の順番に値がセット(回転)されます。
</p>

<p>
では実際に「HAKO」を使って回転を確認してみましょう。
</p>

<div class="info">

<div class="olradio"> 
<p>
<span class="olradio"><input type="radio" name="p1"></span> まずヒエラルキーで「HAKO」をクリックし、Transform の rotation の (x,y,z) の値をそれぞれ (0,0,0) にリセットする。
<br>
<span class="olradio"><input type="radio" name="p1"></span> まず rotation の z の値を増やしたり減らしたりして理論通りに z 軸回りで回転することを確かめる。
<br>
<span class="olradio"><input type="radio" name="p1"></span> 次は rotation の x の値を増やしたり減らしたりして理論通りに x 軸回りで回転することを確かめる。
<br>
<span class="olradio"><input type="radio" name="p1"></span> 最後に rotation の y の値を増やしたり減らしたりして理論通りに y 軸回りで回転することを確かめる。
<br>
<span class="olradio"><input type="radio" name="p1"></span> 確認が終わったら「HAKO」の Transform の rotation の (x,y,z) の値を (45,45,0) に戻す。
</p>
</div>

</div>

<br>
<h3>
3. ジンバルロックに注意する
</h3>

<p>
回転の練習をしていて気が付いたかもしれませんが、x 軸の角度を 90 度、または -90 度にすると y 軸と z 軸の値を変えても同じ様な回転しかしなくなります。
<br>
この現象のことを「<a href="https://ja.wikipedia.org/wiki/%E3%82%B8%E3%83%B3%E3%83%90%E3%83%AB#%E3%82%B8%E3%83%B3%E3%83%90%E3%83%AB%E3%83%AD%E3%83%83%E3%82%AF">ジンバルロック</a>」と言います。
</p>

<p>
具体的には<a href="https://ja.wikipedia.org/wiki/%E3%83%AD%E3%83%BC%E3%83%AA%E3%83%B3%E3%82%B0">ヨー回転</a>が出来なくなってロール回転しか出来なくなります(飛行機で言うと一旦垂直上昇か垂直落下状態になると姿勢制御出来なくなるという状況です)。
</p>

<p>
ジンバルロックを防ぐためにはクォータニオンというテクニックを使って回転軸を指定する必要があるのですが、これについては<a href="../text03/page03.html">後のページ</a>で説明します。
</p>

<p>
では実際に「HAKO」を使ってジンバルロックを確認してみましょう。
</p>

<div class="info">

<div class="olradio"> 
<p>
<span class="olradio"><input type="radio" name="p1"></span> ヒエラルキーで「HAKO」をクリックして インスペクターに情報を表示する。
<br>
<span class="olradio"><input type="radio" name="p1"></span> インスペクターの Transform の rotation の (x,y,z) の値をそれぞれ (90,0,0) にする。
<br>
<span class="olradio"><input type="radio" name="p1"></span> rotation の y, z の値を増やしたり減らしたりしても同じ方向(ロール回転)にしか回転しないことを確認する。
<br>
<span class="olradio"><input type="radio" name="p1"></span> 確認が終わったら (x,y,z) の値を (45,45,0) に戻す。
</p>
</div>

</div>



<br>
<script>PreNext(4,7)</script>
</body>
</html>
