<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
<link rel="stylesheet" href="../../../common.css">
<script src="../../../common.js"></script>
<title>4. 集約 (has-a/part-of 関係)</title>
</head>
<body>

<nav class="brcr">
<ol>
<li><a href="../">アクティビティ: クラス図とオブジェクト図</a></li>
<li>学習項目: [1] クラス図</li>
<li><script>GetTitle()</script></li>
</ol>
</nav>

<h2><script>GetTitle()</script></h2>

<p>
ここでは関連の一種である集約について学びます。
</p>

<p>
集約は「一方のクラスがもう一方のクラスを所有している」あるいは「一方のクラスはもう一方のクラスの一部である」などの主従関係を明確に示すために使われます。
<br>
この集約をクラス図で表す場合は図1の様に所有者側のクラスに中抜きのダイヤマークを付けます。
</p>

<p>
※ 中抜きダイヤマークばかりになるとクラス図が見辛くなるので<b>主従関係が明らかな場合は中抜きダイヤマークを省略することも多いです</b>
</p>


<br>
<p>
<input type="checkbox"><b>図1: 集約のクラス図</b>
</p>
<img src="./img/page04-fig1.png" alt="">

<br>
<p>
この関係を英語で書くと
</p>

<p>
<b>A has a B ( A は B を所有している)</b>
</p>

<p>
または
</b>

<p>
<b>B is part of A ( B は A の一部である)</b>
</p>

<p>
となりますので集約は別名「<b>has-a 関係</b>」とか「<b>part-of 関係</b>」と言います。
</p>

<p>
例えば、前のページで挙げた<a href="./img/page03-fig2.png">関連の例</a>の場合、
</p>
<p>
「ORANGE は MyWorld を所有している」または「MyWorld は ORANGE の一部である」
</p>
<p>
という解釈はSFでもなければ変なので普通は
</p>
<p>
「MyWorld は ORANGE を所有している」または「ORANGE は MyWorld の一部である」
</p>
<p>
と解釈して良いでしょう。
</p>
<p>
従って図2の様に集約を使って明確に MyWorld が ORANGE の所有者であることを示せます。
<br>
なお多重度より MyWorld は ORANGE を 4 つ所有しているという事も分かります。
</p>

<br>
<p>
<input type="checkbox"><b>図2: 集約のクラス図の例</b>
</p>
<img src="./img/page04-fig2.png" alt="">

<br>
<p>
さてこれで MyWorld と ORANGE の主従関係が明らかになりましたので、MyWorld のコードは次のソース1の様に書くことが出来ます。
<br>
集約の表現方法は色々ありますが、ソース1の様に所有者側のクラス(MyWorld)のフィールドとして所有される側のクラス(ORANGE)のインスタンスが定義されることが多いです。
<br>
MyWorld は ORANGE を 4 つ所有していますので、ORANGE クラスのフィールドを 4 つ定義しています。
</p>

<div class="info">
<input type="checkbox"><b>ソース 1 : 図2 を元にして書いた「集約」のコーディング例 </b>
<pre class="wrap">
public class MyWorld{

    private ORANGE orange0;
    private ORANGE orange1;
    private ORANGE orange2;
    private ORANGE orange3;

    // getter
    public ORANGE get_orange0(){ return orange0; }
    public ORANGE get_orange1(){ return orange1; }
    public ORANGE get_orange2(){ return orange2; }
    public ORANGE get_orange3(){ return orange3; }

    // コンストラクタ
    public MyWorld() 
    {
         orange0 = new ORANGE(0);
         orange1 = new ORANGE(1);
         orange2 = new ORANGE(2);
         orange3 = new ORANGE(3);
    }
}
</pre>
</div>

<p>
なおフィールドを 4 つ追加したので、図2は次の図3の様に変わります。
</p>

<br>
<p>
<input type="checkbox"><b>図3: ソース 1 のクラス図</b>
</p>
<img src="./img/page04-fig3.png" alt="">



<br>
<script>PreNext(4,4)</script>
</body>
</html>
