<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
<link rel="stylesheet" href="../../../common.css">
<script src="../../../common.js"></script>
<title>4. 集約 (has a 関係)</title>
</head>
<body>

<nav class="brcr">
<ol>
<li><a href="../">アクティビティ: クラス図とオブジェクト図</a></li>
<li>学習項目: [1] クラス図とオブジェクト図</li>
<li><script>GetTitle()</script></li>
</ol>
</nav>

<h2><script>GetTitle()</script></h2>

<p>
ここでは「関連」の一種である「集約」について学びます。
</p>

<p>
「集約」は「一方のクラスがもう一方のクラスの構成物になっている」あるいは「一方のクラスがもう一方のクラスを所有している」などの主従関係を明確に示すために使われます。
</p>

<p>
「集約」をクラス図で表す場合はマスター側のクラスに中抜きのダイヤマークを付けます。
</p>


<div class="info">
<input type="checkbox"><b>図1: 集約のクラス図</b>
<p>
</p>
<img src="./img/page04-fig1.png" alt="">
</div>

<p>
この関係を英語で書くと
</p>

<p>
<b>A has a B : A は B を持っている</b>
</p>

<p>
となりますので、「集約」は別名<b>「has a 関係」</b>と言います。
</p>

<p>
例えば、前のページで挙げた関連の例
</p>

<div class="info">
<input type="checkbox"><b>図2: 関連のクラス図の例</b>
<p>
</p>
<img src="./img/page03-fig2.png" alt="">
</div>

<p>
の場合は「ORANGE は MyWorld を持っている」という解釈は(SFとかならともかく)変なので、普通は「MyWorld は ORANGE を持っている」と解釈されます。
<br>
従って次のように「集約」を使って明確に MyWorld がマスターであることを示せます。
</p>

<div class="info">
<input type="checkbox"><b>図3: 集約のクラス図の例</b>
<p>
</p>
<img src="./img/page04-fig3.png" alt="">
</div>

<p>
さてこれで MyWorld と ORANGE の主従関係が明らかになりましたので、MyWorld のコードは次のように書くことが出来ます。
<br>
「集約」のコーディング方法には色々なやり方があるのですが、以下の例のようにマスター側クラスのフィールドとしてスレーブ側クラスのインスタンスを定義するのが「集約」の例として一番分かりやすいと思います。
</p>

<div class="info">
<input type="checkbox"><b>ソース 1 : 図3 を元にして書いた「集約」のコーディング例 </b>
<pre class="wrap">
public class MyWorld{

    private ORANGE orange1,orange2,orange3,orange4;

    public MyWorld() // コンストラクタ
    {
         orange1 = new ORANGE();
         orange2 = new ORANGE();
         orange3 = new ORANGE();
         orange4 = new ORANGE();
    }
}
</pre>
<p>
※ ちなみに上の例は一般的には「集約」ではなくて「コンポジション」と呼ばれます。「コンポジション」については自分で調べてみて下さい。
</p>
</div>

<p>
なお、中抜きダイヤマークが多いとクラス図が見辛くなるので、<b>主従関係が明らかな場合は中抜きダイヤマークを省略して「関連」だけで済ますことも多いです</b>。
</p>

<p>
どの状況では「関連」を使って、どの状況では「集約」を使うべきかという具体的な決まりは特にありませんので、自分でやり易いやり方を見つけたり、所属するチームのやり方に従って下さい。 
</p>

<br>
<script>PreNext(4,5)</script>
</body>
</html>
