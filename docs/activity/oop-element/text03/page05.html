<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
<link rel="stylesheet" href="../../../common.css">
<script src="../../../common.js"></script>
<title>5. インヘリタンスによるポリモーフィズム</title>
</head>
<body>

<nav class="brcr">
<ol>
<li><a href="../">アクティビティ: オブジェクト指向プログラミングの三大要素</a></li>
<li>学習項目: [3] ポリモーフィズム</li>
<li><script>GetTitle()</script></li>
</ol>
</nav>

<h2><script>GetTitle()</script></h2>

<p>
オブジェクト指向言語では「サブクラスのインスタンスをスーパークラスのインスタンスと見なして作る」ことが出来ます。
<br>
この機能を利用するとやはり「同じクラスの同じ名前のメソッドを使ってもインスタンス毎に動作を異ならせることが可能」になります。
<br>
この機能はポリモーフィズムの例として色んな文献上に良く取り上げられています。
</p>
<p>
と言っても良く分からないと思うので、これから具体的なコードを使って順を追って説明していきます。
</p>
<p>
まず大元の FRUIT スーパークラスをソース 1 で定義します。
</p>
<div class="info">
<input type="checkbox"><b>ソース 1 : FRUIT スーパークラス</b>
<pre class="wrap">
public class FRUIT {

    public String name;

    public void eat(){
        System.out.println(name+"美味い");
    }
}
</pre>
</div>
<p>
この FRUIT スーパークラスを継承させて APPLE サブクラス(ソース 2 )と ORANGE サブクラス(ソース 3 )を作ります。
</p>
<div class="info">
<input type="checkbox"><b>ソース 2 : APPLE サブクラス</b>
<pre class="wrap">
public class APPLE extends FRUIT{

    public APPLE(){
        name = "りんご";
    }
}
</pre>
</div>

<br>
<div class="info">
<input type="checkbox"><b>ソース 3 : ORANGE サブクラス</b>
<pre class="wrap">
public class ORANGE extends FRUIT{

    public ORANGE(){
        name = "みかん";
    }
}
</pre>
</div>

<p>
次に main メソッドをソース 4 に示しますが、今まで習ってきた方法と違い<b>「apple と orange が FRUIT スーパークラスのインスタンスになっている」</b>ことに注目して下さい。
</p>

<div class="info">
<input type="checkbox"><b>ソース 4 : main メソッド</b>
<pre class="wrap">
public static void main(String[] args) {

	FRUIT apple = new APPLE();   // ※ 今までは「APPLE apple = new APPLE();」 と new していた！
	FRUIT orange = new ORANGE(); // ※ 今までは「ORANGE orange = new ORANGE();」 と new していた！

	apple.eat();
	orange.eat();
}
</pre>
</div>

<p>
するとapple と orange の実態はそれぞれ APPLE、ORANGE サブクラスのインスタンスなのですが、見かけ上は FRUIT スーパークラスのインスタンスになりますので、<b>同じ FRUIT クラスの同じ eat() メソッドを呼び出しているのにインスタンス apple と orange で結果が異なるようになります</b>(実行結果 1 )。
</p>

<div class="info">
<input type="checkbox"><b>実行結果 1 :</b>
<pre class="wrap">
りんご美味しい
みかん美味しい
</pre>
</div>

<p>
なお、インヘリタンスによるポリモーフィズムを応用すると、次のソース 5 の様にクラス別にメソッドを分けなくてもスーパークラスの引数としてメソッド呼び出しをしたり、ソース 6 の様にスーパークラスのインスタンス配列と for ループを使って異なるサブクラスの複数のインスタンスを一元管理したり出来るようになります。
</p>
<p>
これらのテクニックは非常に良く使われますので覚えておくと良いでしょう。
</p>

<div class="info">
<input type="checkbox"><b>ソース 5 : メソッドの引数をスーパークラスにする</b>
<pre class="wrap">
public void Hoge( FRUIT f )
{
        f.eat();  // ※ f の実態が APPLE なのか ORANGE なのかプログラマは気にする必要が無い！
}

// 呼び出し方法
APPLE apple = new APPLE();
ORANGE orange = new ORANGE();

Hoge( apple );  // ※ apple は APPLE のインスタンス！
Hoge( orange ); // ※ orange は ORANGE のインスタンス！

</pre>
</div>

<br>
<div class="info">
<input type="checkbox"><b>ソース 6 : main メソッド 改</b>
<pre class="wrap">
public static void main(String[] args) {
	        
        FRUIT fruit[] = new FRUIT[2];

        fruit[0] = new APPLE();
        fruit[1] = new ORANGE();
        
        for(int i=0;i &lt; 2;++i) fruit[i].eat();
}
</pre>
<p>
※ オブジェクト指向言語ではこういう状況では普通は配列 + for ループではなくて vector 等のクラス と iterator クラス又は foreach 文を組み合わせて使うことが多いです。
詳細は自分で調べて下さい。
</p>
</div>

<br>
<script>PreNext(5,6)</script>
</body>
</html>
