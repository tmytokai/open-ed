<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
<link rel="stylesheet" href="../../../common.css">
<script src="../../../common.js"></script>
<title>演習</title>
</head>
<body>

<nav class="brcr">
<ol>
<li><a href="../">アクティビティ: 入出力インターフェース</a></li>
<li>学習項目: [3] ADC</li>
<li><script>GetTitle()</script></li>
</ol>
</nav>

<h2><script>GetTitle()</script></h2>

<p>
演習時間: 40  分
</p>

<br>
<h2><a href="./page01.html">1. ADC とは</a></h2>

<p>
演習なし
</p>

<br>
<h2><a href="./page02.html">2. 入力</a></h2>

<pre>
(注意)  pickit4の出力は 3.3V

課題: 可変抵抗をアナログ入力ピンに繋いで電圧とADCの変換値の対応を調べる

0V → ?
1V → ?
2V → ?
3.3V → ?

使用するピン: RA1/AN1 (18ピン)をアナログ入力とする

レジスタ設定:

TRISx ・・使用するピンを1(出力モード)にする※ (31p) 
ANSELx ・・・ 使用するピンを1(アナログ)にする (33p)
※ アナログ入力だがADCを使う時は出力モードにする(138p, the I/O pin should be configured for analog by setting the associated TRIS and ANSEL bits.)

ADCON0 = 0b 0 xxxxx 0 1 ・・・ A/D CONTROL REGISTER 0, p143
ADCON1 = 0b x 000 00 00 ・・・ A/D CONTROL REGISTER 1, p144

アクィジョンタイム（コンデンサの充電待ち時間）は __delay_us(20) くらい

ADCの開始方法:

ADCON0bits.GO_nDONE = 1; で ADC 開始
while (ADCON0bits.GO_nDONE) continue; で終了待ち

ADRESH ・・・ ADC RESULT REGISTER HIGH, p145(ADFM = 0), p146(ADFM = 1) 
ADRESL ・・・ ADC RESULT REGISTER LOW,  p145(ADFM = 0), p146(ADFM = 1) 

</pre>

<script>PreNext(3,2)</script>
</body>
</html>
