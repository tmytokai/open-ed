<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
<link rel="stylesheet" href="../../../common.css">
<script src="../../../common.js"></script>
<title>演習</title>
</head>
<body>

<nav class="brcr">
<ol>
<li><a href="../">アクティビティ: 入出力インターフェース</a></li>
<li>学習項目: [4] PWM</li>
<li><script>GetTitle()</script></li>
</ol>
</nav>

<h2><script>GetTitle()</script></h2>

<br>
<h2><a href="./page01.html">1. PWM とは</a></h2>
<h2><a href="./page02.html">2. 出力波形</a></h2>

<br>
<p>
<input type="checkbox"><b>演習 4-1 (個人PC):</b> PWM を使ってみましょう。プログラムの仕様は以下の通りです。
</p>
<div class="info">
<p>
<b>仕様:</b>
</p>
<ol>
<li>RB7 から PWM を出力する(番号は1番)</li>
<li>タクトスイッチを離している時は PWM周期 16 ミリ秒、パルス幅 8 ミリ秒 の波形を出力する</li>
<li>タクトスイッチを押している時は PWM周期 8 ミリ秒、パルス幅 6 ミリ秒 の波形を出力する</li>
</ol>

</div>
<div class="olradio">
<p>
<span class="olradio"><input type="radio" name="p1"></span> プロジェクト「IO_3_1」を「IO_4_1」にコピーします(プロジェクト名を右クリックして Copy を選択)。
<br>
<span class="olradio"><input type="radio" name="p1"></span> プロジェクト IO_3_1 を閉じます(プロジェクト名を右クリックして Close を選択)。
<br>
<span class="olradio"><input type="radio" name="p1"></span> (もし開きっぱなしになっていたら) 前のプロジェクトで開いていたソースを全て閉じます。
<br>
<span class="olradio"><input type="radio" name="p1"></span> main.c を開いて例4を有効にします。
<br>
<span class="olradio"><input type="radio" name="p1"></span> 仕様に従って setup 関数と run 関数の内容を書き換えます。
<br>
<span class="olradio"><input type="radio" name="p1"></span> 回路を作成します。
</p>
<p>
以下の設定に従って回路を作成して下さい。
<br>
(*) が前の演習からの変更箇所です。
</p>
<div class="info">
<pre class="wrap">
<b>ピン配置設定・回路接続方法:</b>

01: VDD(3.3V)
02: RA5
03: RA4
04: MCLR/VPP -- PICKit の 1: NMCLR ※ プルアップ抵抗不要
05: RC5
06: RC4
07: RC3
08: RC6
09: RC7
10: (*)RB7/PWM1 -- オシロスコープ

11: RB6
12: RB5/Tx -- RN-42 の J2-7 : Rx
13: RB4/Rx -- RN-42 の J2-6 : Tx
14: RC2
15: RC1/ANC1 -- 可変抵抗の中央ピン
16: RC0 (GPIO出力) -- LED
17: RA2 (GPIO入力) -- タクトスイッチ ※ プルアップ抵抗不要
18: ICSPCLK(PGC) -- PICKit の 5: PGC
19: ICSPDAT(PGD  -- PICKit の 4: PGD
20: VSS(GND)

</pre>
</div>
<p>
<span class="olradio"><input type="radio" name="p1"></span> 書き込みボタンを押して正常に動作する事を確認して下さい。 
<br>
<span class="olradio"><input type="radio" name="p1"></span> 指定場所に「setup関数」と「run関数」を記入してください。
</p>

</div>

<br>
<p>
<input type="checkbox"><b>演習 4-2 (個人PC):</b> PWM を使って音を鳴らしてみましょう。プログラムの仕様は以下の通りです。
</p>
<div class="info">
<p>
<b>仕様:</b>
</p>
<ol>
<li>RA4 から PWM を出力する(番号は2番)</li>
<li>タクトスイッチを離している時は音を出さない</li>
<li>タクトスイッチを押している時はオクターブ3のド(131 Hz) の音を出す</li>
</ol>

<br>
<p>
<b>音階と PWM 周期、パルス幅の関係:</b>
</p>

<p>
・オクターブ3のド(131 Hz)
</p>

<p>
131 Hzは周期で言うと 1/131 = 0.0076 秒 = 7.6 ミリ秒なので、PWM 周期を 7.6 ミリ秒にします。
<br>
パルス幅は(適当に決めて良いですが)今回は PWM 周期の半分の 3.8 ミリ秒にします。
</p>

</div>
<div class="olradio">
<p>
<span class="olradio"><input type="radio" name="p2"></span> プロジェクト「IO_4_1」を「IO_4_2」にコピーします(プロジェクト名を右クリックして Copy を選択)。
<br>
<span class="olradio"><input type="radio" name="p2"></span> プロジェクト IO_4_1 を閉じます(プロジェクト名を右クリックして Close を選択)。
<br>
<span class="olradio"><input type="radio" name="p2"></span> (もし開きっぱなしになっていたら) 前のプロジェクトで開いていたソースを全て閉じます。
<br>
<span class="olradio"><input type="radio" name="p2"></span> main.c を開き、仕様に従って setup 関数と run 関数の内容を書き換えます。
<br>
<span class="olradio"><input type="radio" name="p2"></span> 回路を作成します。
</p>
<p>
以下の設定に従って回路を作成して下さい。
<br>
(*) が前の演習からの変更箇所です。
</p>
<div class="info">
<pre class="wrap">
<b>ピン配置設定・回路接続方法:</b>

01: VDD(3.3V)
02: RA5
03: (*)RA4/PWM2 -- 圧電スピーカ ※ 配線済
04: MCLR/VPP -- PICKit の 1: NMCLR ※ プルアップ抵抗不要
05: RC5
06: RC4
07: RC3
08: RC6
09: RC7
10: RB7/PWM1 -- オシロスコープ

11: RB6
12: RB5/Tx -- RN-42 の J2-7 : Rx
13: RB4/Rx -- RN-42 の J2-6 : Tx
14: RC2
15: RC1/ANC1 -- 可変抵抗の中央ピン
16: RC0 (GPIO出力) -- LED
17: RA2 (GPIO入力) -- タクトスイッチ ※ プルアップ抵抗不要
18: ICSPCLK(PGC) -- PICKit の 5: PGC
19: ICSPDAT(PGD  -- PICKit の 4: PGD
20: VSS(GND)

</pre>
</div>
<p>
<span class="olradio"><input type="radio" name="p2"></span> 書き込みボタンを押して正常に動作する事を確認して下さい。 
<br>
<span class="olradio"><input type="radio" name="p2"></span> 指定場所に「setup関数」と「run関数」を記入してください。
</p>

</div>


<script>PreNext(3,2)</script>
</body>
</html>
