
<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="../../../common.css">
<title>演習</title>
</head>
<body>

<p>
<a href="../">アクティビティ: C言語のポインタ</a>
<br>
学習項目: [6] 活用例(1) 関数へのポインタ渡し
<br>
演習時間: 40 分
</p>

<h2>演習</h2>


<br>
<h2>1.<a href="./page01.html">値渡しとポインタ渡し</a></h2>

<p>
<input type="checkbox"><b>演習 1 (個人PC、20分):</b> ここでは「ポインタ渡し」の活用例として「スワップ(swap)関数」を作ってみましょう。
</p>

<p>
スワップ関数は二つ以上の変数の値を入れ替えるための関数で、「ポインタ渡し」の例として良く挙げられます。
<br>
例えば int a と int b という int 型の変数にそれぞれ 1 と 2 が入っている時、このスワップ関数を呼び出すと中身が入れ替わって a が 2、b が 1 となります。
</p>

<p>
さて「ポインタ渡し」を学んでいない C 言語初学者にスワップ関数を作ってもらうと、「値渡し」を使って必ず次のようなコードを書きます。
</p>

<div class="info">
<input type="checkbox"><b>「値渡し」を使ったスワップ(swap)関数の失敗例</b>
<pre class="wrap">
#include &lt;stdio.h&gt;

void swap( int a, int b )
{
   int c = b;
   b = a;
   a = c;
}


int main()
{
   int a = 1;
   int b = 2;
   
   printf("a = %d, b = %d\n", a, b );
   swap( a, b );
   printf("a = %d, b = %d\n", a, b );

   return 0;
}
</pre>
</div>

<p>
<br>
まずこのコードを実行して a と b が入れ替わらないことを確認して下さい。
<br>
その後、スワップ関数の引数と中身、及び main 関数内のスワップ関数の呼び出し部分を「アドレス渡し」を使って正常に動作するように書き換えて下さい。
<br>
正常に動作したらドキュメントファイルに「ソースコード」と「実行結果」をコピーして保存してください。
</p>

<br>
<h2>2.<a href="./page02.html">配列渡し</a></h2>

<p>
<input type="checkbox"><b>演習 2 (個人PC、20分):</b> 「配列渡し」を使って関数の中で配列の各要素の中身を操作してみましょう。
</p>

<p>
まず main 関数を作る前に void 型の自作関数(名前は任意)を作ります。
<br>
引数はint型の配列 a としますが、引数の指定方法は「ポインタ変数を用いる記法」又は「配列の要素数を指定する記法」のどちらを使っても構いません。
<br>
この自作関数の中で a[0] に 12、a[1]に34をセットし、a[2]の中身を 2 倍して下さい。
<br>
ここまで出来たら自作関数の作成を終了します。
</p>

<p>
次に自作関数の下に main 関数を作ります。
<br>
main 関数の中で int 型の長さ 3 の配列 a を定義して下さい。
<br>
次に a[0] と a[1] に 0 を、a[2] に 2 を代入して下さい。
<br>
次に自作関数を呼び出して main 関数で定義した配列 a の中身を書き換えて下さい。
<br>
最後に printf で a[0] 〜 a[2] の値を表示して下さい。
<br>
正常に動作したらドキュメントファイルに「ソースコード」と「実行結果」をコピーして保存してください。
</p>

<br>
<h2>3.ヌルポインタとオーバーランに注意</h2>

<p>
今年度は省略
</p>

</body>
</html>
